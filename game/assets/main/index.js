System.register("chunks:///_virtual/AudioManager.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(o){var u,i,e,t,n,a,s;return{setters:[function(o){u=o.createClass},function(o){i=o.cclegacy,e=o.AudioClip,t=o.resources,n=o.Node,a=o.director,s=o.AudioSource}],execute:function(){i._RF.push({},"f94b5bu0kZPYIKvyzYOEONo","AudioManager",void 0),o("AudioManager",function(){function o(){this._audioSource=void 0;var o=new n;o.name="__audioMgr__",a.getScene().addChild(o),a.addPersistRootNode(o),this._audioSource=o.addComponent(s),this._audioSource.playOnAwake=!1}var i=o.prototype;return i.playOneShot=function(o,u){var i=this;void 0===u&&(u=1),console.log("audio playoneshot"),o instanceof e?this._audioSource.playOneShot(o,u):t.load(o,(function(o,e){o?console.log(o):i._audioSource.playOneShot(e,u)}))},i.play=function(o,u){var i=this;void 0===u&&(u=1),console.log("audio play"),o instanceof e?(this._audioSource.stop(),this._audioSource.clip=o,this._audioSource.play(),this.audioSource.volume=u):t.load(o,(function(o,e){o?console.log(o):(i._audioSource.stop(),i._audioSource.clip=e,i._audioSource.play(),i.audioSource.volume=u)}))},i.stop=function(){console.log("audio stop"),this._audioSource.stop()},i.pause=function(){console.log("audio pause"),this._audioSource.pause()},i.resume=function(){console.log("audio resume"),this._audioSource.play()},u(o,[{key:"audioSource",get:function(){return this._audioSource}}],[{key:"inst",get:function(){return null==this._inst&&(this._inst=new o),this._inst}}]),o}())._inst=void 0,i._RF.pop()}}}));

System.register("chunks:///_virtual/BottomBarContainer.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventCenter.ts"],(function(e){var t,n,u,o,a,i,h,r,c,l,f;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,u=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){a=e.cclegacy,i=e._decorator,h=e.Node,r=e.Label,c=e.Button,l=e.Component},function(e){f=e.default}],execute:function(){var s,m,v,C,p,_,N,b,k,d,B,g,O,E,y;a._RF.push({},"46329EruKNMEI0I++n5bL2Z","BottomBarContainer",void 0);var R=i.ccclass,L=i.property;e("BottomBarContainer",(s=R("BottomBarContainer"),m=L(h),v=L(r),C=L(h),p=L(r),_=L(h),N=L(r),s((d=t((k=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return t=e.call.apply(e,[this].concat(a))||this,u(t,"moveOutBtn",d,o(t)),u(t,"moveOutChanceNumLabel",B,o(t)),u(t,"revokeBtn",g,o(t)),u(t,"revokeChanceNumLabel",O,o(t)),u(t,"shuffleBtn",E,o(t)),u(t,"shuffleChanceNumLabel",y,o(t)),t._moveOutChanceNum=0,t._revokeChanceNum=0,t._shuffleChanceNum=0,t}n(t,e);var a=t.prototype;return a.onLoad=function(){f.on(f.Event_Revoke_StatusChange,this.onRevokeStatusChange,this),f.on(f.Event_Update_MoveOut_Chance,this.updateMoveOutChanceNum,this),f.on(f.Event_Update_Revoke_Chance,this.updateRevokeChanceNum,this),f.on(f.Event_Update_Shuffle_Chance,this.updateShuffleChanceNum,this),this.revokeBtn.getComponent(c).interactable=!1},a.initialize=function(){this._moveOutChanceNum=0,this._revokeChanceNum=0,this._shuffleChanceNum=0,this.updateMoveOutChanceNum(1),this.updateRevokeChanceNum(1),this.updateShuffleChanceNum(1)},a.updateMoveOutChanceNum=function(e){this._moveOutChanceNum+=e,this.moveOutChanceNumLabel.string=""+this._moveOutChanceNum},a.updateRevokeChanceNum=function(e){this._revokeChanceNum+=e,this.revokeChanceNumLabel.string=""+this._revokeChanceNum},a.updateShuffleChanceNum=function(e){this._shuffleChanceNum+=e,this.shuffleChanceNumLabel.string=""+this._shuffleChanceNum},a.onDestroy=function(){f.off(f.Event_Revoke_StatusChange,this.onRevokeStatusChange,this),f.off(f.Event_Update_MoveOut_Chance,this.updateMoveOutChanceNum,this),f.off(f.Event_Update_Revoke_Chance,this.updateRevokeChanceNum,this),f.off(f.Event_Update_Shuffle_Chance,this.updateShuffleChanceNum,this)},a.onRevokeStatusChange=function(e){this.revokeBtn.getComponent(c).interactable=e},a.onMoveOutButtonClick=function(){this._moveOutChanceNum>0&&f.emit(f.Event_Execute_MoveOut)},a.onRevokeButtonClick=function(){this._revokeChanceNum>0&&f.emit(f.Event_Execute_Revoke)},a.onShuffleButtonClick=function(){this._shuffleChanceNum>0&&f.emit(f.Event_Execute_Shuffle_Cards)},t}(l)).prototype,"moveOutBtn",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=t(k.prototype,"moveOutChanceNumLabel",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=t(k.prototype,"revokeBtn",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=t(k.prototype,"revokeChanceNumLabel",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=t(k.prototype,"shuffleBtn",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=t(k.prototype,"shuffleChanceNumLabel",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=k))||b));a._RF.pop()}}}));

System.register("chunks:///_virtual/Card.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CardManager.ts","./CardsLayer.ts","./CardOwnerData.ts","./EventCenter.ts"],(function(t){var e,n,i,o,r,a,s,c,d,l,h,u,p,C,f,g,y,v,T,m;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,o=t.assertThisInitialized,r=t.createClass},function(t){a=t.cclegacy,s=t._decorator,c=t.Node,d=t.Input,l=t.tween,h=t.Vec3,u=t.UIOpacity,p=t.UITransform,C=t.Sprite,f=t.Vec2,g=t.Component},function(t){y=t.CardsManager},function(t){v=t.CardsLayer},function(t){T=t.default},function(t){m=t.default}],execute:function(){var S,b,_,w,E,M,B,k;a._RF.push({},"32f58ajaIdB1rgNQE9p3+h6","Card",void 0);var A=s.ccclass,I=s.property;t("Card",(S=A("Card"),b=I(c),_=I(c),S((M=e((E=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return e=t.call.apply(t,[this].concat(r))||this,i(e,"cardBody",M,o(e)),i(e,"cardCover",B,o(e)),e.cardType=0,e.parentCardsComponent=null,e._isClickable=!0,e.originZIndex=0,e._isShuffling=!1,i(e,"speed",k,o(e)),e}n(e,t);var a=e.prototype;return a.setCardsComponent=function(t){this.parentCardsComponent=t},a.onLoad=function(){this.cardBody.on(d.EventType.TOUCH_START,this.onTouchStart,this),this.cardBody.on(d.EventType.TOUCH_END,this.onTouchEnd,this),this.cardBody.on(d.EventType.TOUCH_CANCEL,this.onTouchCancel,this)},a.onDestroy=function(){this.cardBody.off(d.EventType.TOUCH_START,this.onTouchStart,this),this.cardBody.off(d.EventType.TOUCH_END,this.onTouchEnd,this),this.cardBody.off(d.EventType.TOUCH_CANCEL,this.onTouchCancel,this)},a.onTouchCancel=function(t){var e=this;this.clickable&&l(this.cardBody).to(.1,{scale:new h(1,1,1)}).call((function(){e.node.setSiblingIndex(e.originZIndex)})).start()},a.onTouchStart=function(t){this.clickable&&(this.originZIndex=this.node.getSiblingIndex(),this.node.setSiblingIndex(2e3),m.emit(m.Event_Sound_PlayClick),l(this.cardBody).to(.1,{scale:new h(1.5,1.5,1)}).start())},a.onTouchEnd=function(t){if(this.clickable){if(this._isClickable=!1,m.emit(m.Event_Click_Card,this.getCardOwnerData()),null!=this.parentCardsComponent){this.parentCardsComponent.removeCardType(this);for(var e=this.parentCardsComponent.node.parent;e&&!e.getComponent(v);)e=e.parent;if(e)console.log("CardsLayer: updateSelfAndAllBottomLayers"),y.instance.isCardMoving=!0,e.getComponent(v).updateSelfAndAllBottomLayers(),y.instance.isCardMoving=!1;else console.log("CardsLayer: updateSelfAndAllBottomLayers failed")}this.parentCardsComponent=null}},a.getCardOwnerData=function(){return new T(this.parentCardsComponent,this.node.parent,this.node.getSiblingIndex(),this.node.getWorldPosition(),this)},a.setDarkMode=function(t,e){var n=this;if(void 0===e&&(e=!1),this.cardCover)if(e||y.instance.isCardMoving){var i=this.cardCover.getComponent(u);this.cardCover.active&&!t?l(i).to(.3,{opacity:0}).call((function(){n.cardCover.active=!1,i.opacity=160})).start():!this.cardCover.active&&t&&(this.cardCover.active=t,i.opacity=0,l(i).to(.3,{opacity:160}).start())}else this.cardCover.active=t},a.setCardSize=function(t,e){this.node.getComponent(p).setContentSize(t,e)},a.setCardType=function(t){this.cardType=t;var e=this.cardBody.getComponent(C);e.spriteFrame=e.spriteAtlas.getSpriteFrame("card-"+t)},a.getCardType=function(){return this.cardType},a.rotateAroundPoint=function(){var t=this;if(!this._isShuffling&&null!=this.parentCardsComponent){var e=this.parentCardsComponent.node.parent;if(e){this._isShuffling=!0;var n=e.getWorldPosition(),i=e.getComponent(p),o=i.width/2;n.x+=o,n.y+=i.height/2;var r=.75*o,a=.35*o,s=1080/this.speed,c=y.instance.gridWidth,d=y.instance.gridHeight,u=this.node.getPosition(),C=this.node.getWorldPosition(),g=new f(C.x+c,C.y+d),v=Math.random()*(r-a)+a,T=new f;f.subtract(T,g,n.toVec2());var m=this.calculateAngle(new f(1,0),T),S=m*(Math.PI/180),b=n.x+v*Math.cos(S)-c,_=n.y+v*Math.sin(S)-d;l(this.node).to(.2,{worldPosition:new h(b,_,0)}).to(s,{},{easing:"linear",onUpdate:function(t,e){var i=(1080*e+m)*(Math.PI/180),o=n.x+v*Math.cos(i)-c,r=n.y+v*Math.sin(i)-d;t.setWorldPosition(new h(o,r,0))}}).to(.2,{position:u}).call((function(){t.node.setPosition(u),t.node.angle=0,t._isShuffling=!1})).start()}}},a.isShuffling=function(){return this._isShuffling},a.calculateAngle=function(t,e){var n=f.dot(t,e)/(t.length()*e.length()),i=Math.acos(n);f.cross(t,e)<0&&(i=-i);var o=i*(180/Math.PI);return(o%=360)<0&&(o+=360),o},r(e,[{key:"darkMode",get:function(){return!!this.cardCover&&!this.cardCover.active}},{key:"clickable",get:function(){return this._isClickable},set:function(t){this._isClickable=t}}]),e}(g)).prototype,"cardBody",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=e(E.prototype,"cardCover",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=e(E.prototype,"speed",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 720}}),w=E))||w));a._RF.pop()}}}));

System.register("chunks:///_virtual/CardManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Card.ts","./LinkedCards.ts","./SimpleIntersectCards.ts","./Type.ts","./LinearFlattenCards.ts"],(function(t){var e,r,n,a,i,s,d,c,o,f,u,l,C,h;return{setters:[function(t){e=t.createClass},function(t){r=t.cclegacy,n=t.instantiate,a=t.assert,i=t.Vec3},function(t){s=t.Card},function(t){d=t.LinkedCards,c=t.LinkCardsConfig},function(t){o=t.SimpleIntersectCards,f=t.SimpleIntersectCardsConfig},function(t){u=t.LayerCardsSpecification,l=t.LayerCardsType},function(t){C=t.LinearFlattenCards,h=t.LinearFlattenCardsConfig}],execute:function(){r._RF.push({},"ae31cDu0btOSbzCQQffWO6e","CardManager",void 0),t("CardsManager",function(){function t(){this._cardWidth=0,this._cardHeight=0,this._cardPrefab=null,this._linkedCardsPrefab=null,this._simpleIntersectCardsPrefab=null,this._linearFlattenCardsPrefab=null,this.isCardMoving=!1}var r=t.prototype;return r.createCard=function(t){if(null==this._cardPrefab)return null;var e=n(this._cardPrefab).getComponent(s);return e.getComponent(s).setCardSize(this.cardWidth,this.cardHeight),e.setCardType(t),e},r.createLinkedCards=function(t,e){if(null==this._linkedCardsPrefab)return null;a(t>0,"cards number must bigger than 0");var r=n(this._linkedCardsPrefab).getComponent(d);return r.initConfig(new c(t,e)),r},r.createSimpleIntersectCards=function(t,e,r){if(null==this._simpleIntersectCardsPrefab)return null;var a=n(this._simpleIntersectCardsPrefab).getComponent(o);return a.initConfig(new f(t,e,r)),a},r.createLinearFlattenCards=function(t,e){if(null==this._linearFlattenCardsPrefab)return null;var r=n(this._linearFlattenCardsPrefab).getComponent(C);return r.initConfig(new h(t,e)),r},r.getRealPosition=function(e,r){var n=t.instance.gridWidth*e,a=t.instance.gridHeight*r;return new i(n,a,0)},r.generateRandomCards=function(t){var e=t;return e%3!=0&&(e-=e%3),this.generateCardArray(e)},r.generateCardArray=function(t){if(t%3!=0)throw new Error("count 必须是 3 的倍数");for(var e=new Array(16).fill(0),r=t;r>0;){var n=Math.floor(16*Math.random());if(!(r>=3))break;e[n]+=3,r-=3}for(var a=[],i=0;i<16;i++)for(var s=0;s<e[i];s++)a.push(i);for(var d=a.length-1;d>0;d--){var c=Math.floor(Math.random()*(d+1)),o=[a[c],a[d]];a[d]=o[0],a[c]=o[1]}return a},r.createTopExtraLayerSpecification=function(t,e,r){return u.fromJSON({row:e,col:t,cardsType:l.LinearFlattenCards,data:{numInCol:1,numInRow:r}})},e(t,[{key:"cardPrefab",set:function(t){this._cardPrefab=t}},{key:"linkedCardsPrefab",set:function(t){this._linkedCardsPrefab=t}},{key:"simpleIntersectCardsPrefab",set:function(t){this._simpleIntersectCardsPrefab=t}},{key:"linearFlattenCardsPrefab",set:function(t){this._linearFlattenCardsPrefab=t}},{key:"cardWidth",get:function(){return this._cardWidth},set:function(t){this._cardWidth=t}},{key:"cardHeight",get:function(){return this._cardHeight},set:function(t){this._cardHeight=t}},{key:"gridWidth",get:function(){return this._cardWidth/2}},{key:"gridHeight",get:function(){return this._cardHeight/2}}],[{key:"instance",get:function(){return t._instance||(t._instance=new t),t._instance}}]),t}())._instance=void 0,r._RF.pop()}}}));

System.register("chunks:///_virtual/CardOwnerData.ts",["cc","./CardManager.ts","./CardsLayer.ts"],(function(e){var n,t,r,o,a,d;return{setters:[function(e){n=e.cclegacy,t=e.Vec3,r=e.tween,o=e.UITransform},function(e){a=e.CardsManager},function(e){d=e.CardsLayer}],execute:function(){n._RF.push({},"2748a6TeKFA7IkVctIgBfTn","CardOwnerData",void 0);e("default",function(){function e(e,n,t,r,o){this.parentCardsComponent=null,this.parentNode=null,this.indexInParentChildren=0,this.originWorldPos=null,this.card=null,this.parentCardsComponent=e,this.parentNode=n,this.indexInParentChildren=t,this.originWorldPos=r,this.card=o}return e.prototype.revoke=function(){var e=this;a.instance.isCardMoving=!0,this.card.setCardsComponent(this.parentCardsComponent),this.card.node.setScale(new t(1,1,1)),r(this.card.node).to(.2,{worldPosition:this.originWorldPos}).call((function(){if(e.parentNode){e.parentNode.insertChild(e.card.node,e.indexInParentChildren);var n=e.parentNode.getComponent(o);e.card.node.setPosition(n.convertToNodeSpaceAR(e.originWorldPos))}if(e.card.clickable=!0,e.parentCardsComponent){e.parentCardsComponent.addCardType(e.card);for(var t=e.parentCardsComponent.node.parent;t&&!t.getComponent(d);)t=t.parent;if(t)console.log("Revoke scene: CardsLayer: updateSelfAndAllBottomLayers"),t.getComponent(d).updateSelfAndAllBottomLayers();else console.log("Revoke scene: CardsLayer: updateSelfAndAllBottomLayers failed")}a.instance.isCardMoving=!1})).start()},e}());n._RF.pop()}}}));

System.register("chunks:///_virtual/CardPlaceHolder.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var r,t,c,n,a;return{setters:[function(e){r=e.inheritsLoose,t=e.createClass},function(e){c=e.cclegacy,n=e._decorator,a=e.Component}],execute:function(){var o;c._RF.push({},"a0b7fURhCNKPJHdjF+6zNKM","CardPlaceHolder",void 0);var l=n.ccclass;e("default",l("CardPlaceHolder")(o=function(e){function c(){for(var r,t=arguments.length,c=new Array(t),n=0;n<t;n++)c[n]=arguments[n];return(r=e.call.apply(e,[this].concat(c))||this)._cardType=0,r}return r(c,e),t(c,[{key:"cardType",get:function(){return this._cardType},set:function(e){this._cardType=e}}]),c}(a))||o);c._RF.pop()}}}));

System.register("chunks:///_virtual/CardsBoard.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CardManager.ts","./CardsLayer.ts","./Level2.ts","./DockBar.ts","./EventCenter.ts","./BottomBarContainer.ts"],(function(e){var r,t,a,n,i,o,s,l,c,u,d,f,h,C,y,b,p,m;return{setters:[function(e){r=e.applyDecoratedDescriptor,t=e.inheritsLoose,a=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){i=e.cclegacy,o=e._decorator,s=e.Node,l=e.Prefab,c=e.instantiate,u=e.UITransform,d=e.Graphics,f=e.Component},function(e){h=e.CardsManager},function(e){C=e.CardsLayer},function(e){y=e.Level2},function(e){b=e.DockBar},function(e){p=e.default},function(e){m=e.BottomBarContainer}],execute:function(){var v,g,B,P,L,_,k,S,T,w,F,E,z,D,H,G,A,N,I,M,R,x,U;i._RF.push({},"e3cb6nLuh1BlKBfkWHLUkUA","CardsBoard",void 0);var W=o.ccclass,X=o.property;e("CardsBoard",(v=W("CardsBoard"),g=X(s),B=X(s),P=X(l),L=X(l),_=X(l),k=X(l),S=X(l),T=X(b),w=X(s),F=X(s),v((D=r((z=function(e){function r(){for(var r,t=arguments.length,i=new Array(t),o=0;o<t;o++)i[o]=arguments[o];return r=e.call.apply(e,[this].concat(i))||this,a(r,"cardsContainer",D,n(r)),a(r,"bottomBarContainer",H,n(r)),a(r,"cardPrefab",G,n(r)),a(r,"linkedCardsPrefab",A,n(r)),a(r,"simpleIntersectCardsPrefab",N,n(r)),a(r,"linearFlattenCardsPrefab",I,n(r)),a(r,"cardsLayerPrefab",M,n(r)),a(r,"dockBar",R,n(r)),a(r,"failContainer",x,n(r)),a(r,"successContainer",U,n(r)),r.layerHead=null,r}t(r,e);var i=r.prototype;return i.onLoad=function(){h.instance.isCardMoving=!1,h.instance.cardPrefab=this.cardPrefab,h.instance.linkedCardsPrefab=this.linkedCardsPrefab,h.instance.simpleIntersectCardsPrefab=this.simpleIntersectCardsPrefab,h.instance.linearFlattenCardsPrefab=this.linearFlattenCardsPrefab},i.start=function(){this.initBoardSize(),this.cardsLayerPrefab&&this.initLayers([y.instance.layer1Data,y.instance.layer2Data]),this.initBottomBarContainer(),p.on(p.Event_Game_Fail,this.onGameFailed,this),p.on(p.Event_Try_Check_Success,this.onTryCheckSuccess,this),p.on(p.Event_Execute_Shuffle_Cards,this.shuffleCards,this),p.emit(p.Event_Sound_PlayBgm)},i.onDestroy=function(){p.off(p.Event_Game_Fail,this.onGameFailed,this),p.off(p.Event_Try_Check_Success,this.onTryCheckSuccess,this),p.off(p.Event_Execute_Shuffle_Cards,this.shuffleCards,this)},i.initBottomBarContainer=function(){this.bottomBarContainer&&this.bottomBarContainer.getComponent(m).initialize()},i.onTryCheckSuccess=function(){for(var e=this.layerHead,r=!0;e;){if(e.countLeftCardsNumber()>0){r=!1;break}e=e.topCardsLayer}r&&this.onGameSuccess()},i.onGameSuccess=function(){p.emit(p.Event_Sound_PlaySuccess),this.successContainer&&(this.successContainer.active=!0)},i.onGameFailed=function(){this.failContainer&&(this.failContainer.active=!0)},i.onClickRestartGame=function(){this.dockBar&&this.dockBar.reset(),this.cardsLayerPrefab&&this.initLayers([y.instance.layer1Data,y.instance.layer2Data]),this.initBottomBarContainer(),p.emit(p.Event_Sound_PlayBgm),this.failContainer&&(this.failContainer.active=!1),this.successContainer&&(this.successContainer.active=!1)},i.onClickStartNewChessGame=function(){this.onClickRestartGame()},i.initLayers=function(e){this.cardsContainer.removeAllChildren();for(var r=0,t=null,a=null,n=0;n<e.length;n++){var i=c(this.cardsLayerPrefab).getComponent(C);i.initLayerData(e[n]),r+=i.countConfigCardsNumber(),a&&(a.topCardsLayer=i,i.bottomCardsLayer=a),t||(t=i),a=i}this.layerHead=t;var o=null,s=r%3;if(0!=s){s=3-s;var l=h.instance.createTopExtraLayerSpecification(6,6,s);(o=c(this.cardsLayerPrefab).getComponent(C)).initLayerData([l]),r+=s,a&&(a.topCardsLayer=o),o.bottomCardsLayer=a,a=o}console.log("CardsBoard, cardsNum = ",r);for(var u=h.instance.generateRandomCards(r),d=t,f=0;d;){var y=d.countConfigCardsNumber();d.setCardsTypeArray(u.slice(f,f+y)),f+=y,this.cardsContainer.addChild(d.node),d=d.topCardsLayer}},i.shuffleCards=function(){if(this.layerHead){p.emit(p.Event_Sound_PlayClick);for(var e=[],r=[],t=this.layerHead;null!=t;){var a=t.getCards(),n=t.getCardsTypeArray();a.length>0&&e.push.apply(e,a),n.length>0&&r.push.apply(r,n),t=t.topCardsLayer}for(var i=0;i<e.length;i++)if(e[i].isShuffling())return;p.emit(p.Event_Update_Shuffle_Chance,-1);for(var o=0;o<e.length;o++)e[o].rotateAroundPoint();for(var s=r.length-1;s>0;s--){var l=Math.floor(Math.random()*(s+1)),c=[r[l],r[s]];r[s]=c[0],r[l]=c[1]}t=this.layerHead;for(var u=0;t;){var d=t.countLeftCardsNumber();t.updateCardsTypeArray(r.slice(u,u+d)),u+=d,t=t.topCardsLayer}}},i.initBoardSize=function(){var e=this.node.getComponent(u),r=e.width/8.3;if(h.instance.cardWidth=r,h.instance.cardHeight=r+2,this.cardsContainer){var t=this.cardsContainer,a=t.getComponent(u);a.width=7*h.instance.cardWidth,a.height=9*h.instance.cardHeight;var n=t.getPosition(),i=(e.width-a.width)/2;t.setPosition(-e.width/2+i,n.y,n.z)}},i.gridTheBoardForDebug=function(){if(this.cardsContainer){var e=this.cardsContainer,r=e.getComponent(d),t=e.getComponent(u),a=t.width,n=t.height,i=a/14,o=n/18;r.lineWidth=2,r.strokeColor.fromHEX("#FFFFFF");for(var s=0;s<=14;s+=2){var l=s*i;r.moveTo(l,0),r.lineTo(l,n)}for(var c=0;c<=18;c+=2){var f=c*o;r.moveTo(0,f),r.lineTo(a,f)}r.stroke(),r.strokeColor.fromHEX("#000000");for(var h=1;h<=14;h+=2){var C=h*i;r.moveTo(C,0),r.lineTo(C,n)}for(var y=1;y<=18;y+=2){var b=y*o;r.moveTo(0,b),r.lineTo(a,b)}r.stroke()}},r}(f)).prototype,"cardsContainer",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=r(z.prototype,"bottomBarContainer",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=r(z.prototype,"cardPrefab",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=r(z.prototype,"linkedCardsPrefab",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=r(z.prototype,"simpleIntersectCardsPrefab",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=r(z.prototype,"linearFlattenCardsPrefab",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=r(z.prototype,"cardsLayerPrefab",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=r(z.prototype,"dockBar",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=r(z.prototype,"failContainer",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=r(z.prototype,"successContainer",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=z))||E));i._RF.pop()}}}));

System.register("chunks:///_virtual/CardsComponent.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CardManager.ts","./Card.ts"],(function(r){var e,t,n,i,s,a,o;return{setters:[function(r){e=r.inheritsLoose,t=r.createClass},function(r){n=r.cclegacy,i=r.UITransform,s=r.Component},function(r){a=r.CardsManager},function(r){o=r.Card}],execute:function(){n._RF.push({},"edc8bjzndpAybQzXjjsVDgG","CardsComponent",void 0);r("CardsComponent",function(r){function n(){for(var e,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return(e=r.call.apply(r,[this].concat(n))||this)._cardsLayer=null,e.gridOccupies=null,e.originCol=0,e.originRow=0,e._cards=null,e._idInLayer=0,e}e(n,r);var s=n.prototype;return s.setOriginColAndRow=function(r,e){this.originCol=r,this.originRow=e},s.setCardsLayer=function(r){this._cardsLayer=r},s.getCardsLayer=function(){return this._cardsLayer},s.countConfigCardsNumber=function(){return 0},s.countLeftCardsNumber=function(){return this._cards?this._cards.length:0},s.setCardsTypeArray=function(r){this._cards=r},s.updateCardsTypeArray=function(r){this._cards=r;for(var e=0;e<this.node.children.length;e++){var t=this.node.children[e].getComponent(o);t&&t.setCardType(r[e])}},s.getCardsTypeArray=function(){return this._cards},s.getCards=function(){var r=[];return this.node.children.forEach((function(e){var t=e.getComponent(o);t&&r.push(t)})),r},s.removeCardType=function(r){if(this._cards){var e=this._cards.lastIndexOf(r.getCardType());e>=0&&this._cards.splice(e,1)}},s.addCardType=function(r){this._cards&&this._cards.push(r.getCardType())},s.checkHasItemInPosition=function(r,e){if(!this.gridOccupies)return!1;if(!this.gridOccupies.has(r))return!1;var t=this.gridOccupies.get(r);return!!t.has(e)&&t.get(e).length>0},s.checkOccupiedGrids=function(){var r=this;return this.gridOccupies=new Map,this.node.children.forEach((function(e){for(var t=r.getOccupiedPositions(e),n=0;n<t.length;n+=2)r.calculatePointToGridPosition(r.gridOccupies,t[n],t[n+1],e)})),this.gridOccupies},s.getOccupiedPositions=function(r){var e=[],t=a.instance.gridWidth,n=a.instance.gridHeight,s=r.getComponent(i),o=r.getPosition(),c=Math.floor((o.x+1)/t),d=Math.floor((o.y+1)/n),h=Math.floor((o.x+s.width-1)/t),u=Math.floor((o.y+s.height-1)/n);if(e.push(c,d,h,u,c,u,h,d),h-c>1){var f=h-1;e.push(f,d,f,u)}if(u-d>1){var g=u-1;e.push(c,g,h,g)}return e},s.calculatePointToGridPosition=function(r,e,t,n){var i=null;if(r.has(e))if((i=r.get(e)).has(t)){var s=r.get(e).get(t);if(s.length>0&&s.lastIndexOf(n)==s.length-1)return;s.push(n)}else i.set(t,[n]);else(i=new Map).set(t,[n]),r.set(e,i)},s.checkIsCardDarkMode=function(){var r=this;this.node.children.forEach((function(e){for(var t=r.getOccupiedPositions(e),n=!1,i=0;i<t.length;i+=2)if(!r.checkIsTheTopCard(r.gridOccupies,t[i],t[i+1],e)){n=!0;break}if(!n&&r._cardsLayer)for(var s=0;s<t.length;s+=2){var a=t[s]+r.originCol,c=t[s+1]+r.originRow;if(r._cardsLayer.checkHasCardInTopCardsComponent(r,a,c)||r._cardsLayer.checkHasItemInOtherTopLayer(a,c)){n=!0;break}}var d=e.getComponent(o);d.setDarkMode(n),d.clickable=!n}))},s.checkIsTheTopCard=function(r,e,t,n){if(r.has(e)){if(r.get(e).has(t)){var i=r.get(e).get(t);return i.length<=0||i.indexOf(n)==i.length-1}return!0}return!0},t(n,[{key:"idInLayer",get:function(){return this._idInLayer},set:function(r){this._idInLayer=r}}]),n}(s));n._RF.pop()}}}));

System.register("chunks:///_virtual/CardsLayer.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CardManager.ts","./Type.ts"],(function(t){var r,a,e,i,n,s,o,c,d;return{setters:[function(t){r=t.inheritsLoose},function(t){a=t.cclegacy,e=t._decorator,i=t.assert,n=t.Component},function(t){s=t.CardsManager},function(t){o=t.LayerCardsSpecification,c=t.CardsSpecificationBlock,d=t.LayerCardsType}],execute:function(){var u;a._RF.push({},"44163fV/0FDr6Aa9w3bvmu/","CardsLayer",void 0);var f=e.ccclass,h=(e.property,function(){this.id=void 0,this.cards=void 0,this.row=void 0,this.col=void 0});t("CardsLayer",f("CardsLayer")(u=function(t){function a(){for(var r,a=arguments.length,e=new Array(a),i=0;i<a;i++)e[i]=arguments[i];return(r=t.call.apply(t,[this].concat(e))||this)._itemList=[],r._specifications=null,r.topCardsLayer=null,r.bottomCardsLayer=null,r}r(a,t);var e=a.prototype;return e.initLayerData=function(t){var r=this;this._specifications=t,this._specifications&&this._specifications.forEach((function(t){if(t instanceof o)r.prepareCards(t);else if(t instanceof c){console.log("CardsSpecificationBlock",t);for(var a=0;a<t.repeatCount;a++)t.layers.forEach((function(t){r.prepareCards(t)}))}}))},e.countConfigCardsNumber=function(){var t=0;return this._itemList.forEach((function(r){t+=r.cards.countConfigCardsNumber()})),t},e.countLeftCardsNumber=function(){var t=0;return this._itemList.forEach((function(r){t+=r.cards.countLeftCardsNumber()})),t},e.setCardsTypeArray=function(t){var r=0;this._itemList.forEach((function(a){var e=a.cards.countConfigCardsNumber();a.cards.setCardsTypeArray(t.slice(r,r+e)),r+=e}))},e.updateCardsTypeArray=function(t){var r=0;this._itemList.forEach((function(a){var e=a.cards.countLeftCardsNumber();a.cards.updateCardsTypeArray(t.slice(r,r+e)),r+=e}))},e.getCardsTypeArray=function(){var t=[];return this._itemList.forEach((function(r){var a=r.cards.getCardsTypeArray();t.push.apply(t,a)})),t},e.getCards=function(){var t=[];return this._itemList.forEach((function(r){var a=r.cards.getCards();a.length>0&&t.push.apply(t,a)})),t},e.onLoad=function(){var t=this;this._itemList.forEach((function(r){t.node.addChild(r.cards.node)}))},e.start=function(){this.topCardsLayer||this.updateSelfAndAllBottomLayers(!0)},e.prepareCards=function(t){var r=null;switch(t.cardsType){case d.LinkedCards:var a=t.data.get("cardsNumber"),e=t.data.get("direction");i(a>0,"cardsNumber must be bigger than 0"),i(e>=0&&e<=3,"direction must be between 0 and 3"),r=s.instance.createLinkedCards(a,e),i(null!=r,"LinkedCards is null");break;case d.LinearFlattenCards:var n=t.data.get("numInRow"),o=t.data.get("numInCol");i(o>0&&n>0,"numInRow and numInCol must bigger than 0"),r=s.instance.createLinearFlattenCards(o,n),i(null!=r,"LinearFlattenCards is null")}if(r){r.setCardsLayer(this),r.setOriginColAndRow(t.col,t.row),r.node.setPosition(s.instance.getRealPosition(t.col,t.row));var c=new h;c.cards=r,c.row=t.row,c.col=t.col,c.id=this._itemList.length,r.idInLayer=c.id,this._itemList.push(c)}},e.checkHasItemInCurrentLayer=function(t,r){for(var a=0;a<this._itemList.length;a++){var e=this._itemList[a];if(e.cards.checkHasItemInPosition(t-e.col,r-e.row))return!0}return!1},e.checkHasCardInTopCardsComponent=function(t,r,a){for(var e=this._itemList.findIndex((function(r){return r.id==t.idInLayer}))+1;e<this._itemList.length;e++){var i=this._itemList[e];if(i.cards.checkHasItemInPosition(r-i.col,a-i.row))return!0}return!1},e.checkHasItemInOtherTopLayer=function(t,r){if(!this.topCardsLayer)return!1;for(var a=this.topCardsLayer;null!=a;){if(a.checkHasItemInCurrentLayer(t,r))return!0;a=a.topCardsLayer}return!1},e.updateDarkModeStatus=function(){this._itemList.forEach((function(t){t.cards.checkIsCardDarkMode()}))},e.updateOccupiedGrids=function(){this._itemList.forEach((function(t){t.cards.checkOccupiedGrids()}))},e.updateSelfAndAllBottomLayers=function(t){void 0===t&&(t=!1),this.updateOccupiedGrids(),this.updateDarkModeStatus();for(var r=this.bottomCardsLayer;null!=r;)t&&r.updateOccupiedGrids(),r.updateDarkModeStatus(),r=r.bottomCardsLayer},a}(n))||u);a._RF.pop()}}}));

System.register("chunks:///_virtual/CardsLayerComponent.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(n){var e,t,o;return{setters:[function(n){e=n.inheritsLoose},function(n){t=n.cclegacy,o=n.Component}],execute:function(){t._RF.push({},"32582UgwvVIlYugfN/2d+Jj","CardsLayerComponent",void 0);n("CardsLayerComponent",function(n){function t(){return n.apply(this,arguments)||this}return e(t,n),t}(o));t._RF.pop()}}}));

System.register("chunks:///_virtual/DarkMask.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,o,i,r,n,s,a,c;return{setters:[function(t){e=t.inheritsLoose},function(t){o=t.cclegacy,i=t._decorator,r=t.Graphics,n=t.view,s=t.Color,a=t.Vec3,c=t.Component}],execute:function(){var l;o._RF.push({},"b8fb1tjDUVJGZiAZZeCQKx2","DarkMask",void 0);var h=i.ccclass;i.property,t("DarkMask",h("DarkMask")(l=function(t){function o(){return t.apply(this,arguments)||this}e(o,t);var i=o.prototype;return i.start=function(){var t=this.node.getComponent(r),e=n.getVisibleSize();t.fillColor=new s(0,0,0,128),t.rect(0,0,e.width,e.height),t.fill(),this.node.setPosition(new a(-e.width/2,-e.height/2,0)),t.strokeColor=new s(255,255,255,255),t.lineWidth=2;for(var o=e.width/2,i=e.width/2,c=e.height,l=0;l<c;)t.moveTo(o,l),l+10>c?t.lineTo(i,c):t.lineTo(i,l+10),t.stroke(),l+=20},i.update=function(t){},o}(c))||l);o._RF.pop()}}}));

System.register("chunks:///_virtual/DockBar.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CardManager.ts","./Card.ts","./ExtendBar.ts","./EventCenter.ts","./TaskQueue.ts","./CardPlaceHolder.ts"],(function(e){var t,n,i,a,r,o,s,d,c,h,l,u,m,v,C,p,f,g,_,B;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){r=e.cclegacy,o=e._decorator,s=e.Node,d=e.Prefab,c=e.UITransform,h=e.tween,l=e.Vec3,u=e.instantiate,m=e.Animation,v=e.Component},function(e){C=e.CardsManager},function(e){p=e.Card},function(e){f=e.ExtendBar},function(e){g=e.default},function(e){_=e.TaskQueue},function(e){B=e.default}],execute:function(){var k,M,w,y,P,x,D,E,T,O,I;r._RF.push({},"c20cfh6lwNIJbciRMt1d//9","DockBar",void 0);var b=o.ccclass,N=o.property,R=function(e,t,n){this.x=0,this.y=0,this.index=0,this.x=e,this.y=t,this.index=n};e("DockBar",(k=b("DockBar"),M=N(s),w=N(s),y=N(s),P=N(d),k((E=t((D=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t=e.call.apply(e,[this].concat(r))||this,i(t,"extendBar",E,a(t)),i(t,"mainBar",T,a(t)),i(t,"dockBarBg",O,a(t)),i(t,"animationNode",I,a(t)),t.taskQueue=new _,t._paddingHorizontal=28,t.currentMainItems=0,t._preMoveCardOwnerData=null,t}n(t,e);var r=t.prototype;return r.setPreMoveCardOwnerData=function(e){this._preMoveCardOwnerData=e,g.emit(g.Event_Revoke_StatusChange,null!=this._preMoveCardOwnerData)},r.start=function(){this.adjustMainBarUI(),g.on(g.Event_Click_Card,this.onClickCard,this),g.on(g.Event_Execute_MoveOut,this.onMoveToExtendBar,this),g.on(g.Event_Execute_Revoke,this.onClickRevoke,this)},r.onDestroy=function(){g.off(g.Event_Click_Card,this.onClickCard,this),g.off(g.Event_Execute_MoveOut,this.onMoveToExtendBar,this),g.off(g.Event_Execute_Revoke,this.onClickRevoke,this)},r.onClickCard=function(e){this.setPreMoveCardOwnerData(e),e&&e.card&&this.moveToMainBar(e.card)},r.reset=function(){this.currentMainItems=0,this.mainBar.removeAllChildren(),this.extendBar.removeAllChildren()},r.adjustMainBarUI=function(){var e=this.node.getComponent(c);e.width=7*C.instance.cardWidth+2*this._paddingHorizontal;var t=this.mainBar.getComponent(c);t.width=7*C.instance.cardWidth,t.height=C.instance.cardHeight;var n=this.dockBarBg.getComponent(c);n.width=e.width,n.height=t.height*(17/9);var i=n.height*(5/17);this.mainBar.setPosition(this._paddingHorizontal,i,0),this.dockBarBg.setPosition(-e.width/2,0,0)},r.getNextDisplayPosition=function(e){var t=this.mainBar.children.filter((function(t){var n=t.getComponent(p);if(null!=n&&n.getCardType()==e)return!0;var i=t.getComponent(B);return null!=i&&i.cardType==e})),n=0,i=this.currentMainItems;if(t&&t.length>0){var a=t.pop();i=this.mainBar.children.lastIndexOf(a)+1,n=a.position.x+C.instance.cardWidth}else n=this.currentMainItems*C.instance.cardWidth;return this.currentMainItems++,new R(n,0,i)},r.moveToMainBar=function(e){var t=this,n=e.node.getWorldPosition();e.node.removeFromParent(),this.node.addChild(e.node),e.node.setWorldPosition(n);var i=new s;i.addComponent(c);var a=i.getComponent(c);i.addComponent(B),i.getComponent(B).cardType=e.getCardType(),a.width=C.instance.cardWidth,a.height=C.instance.cardHeight;var r=this.getNextDisplayPosition(e.getCardType()),o=this.mainBar.getWorldPosition();o.x+=r.x,o.y+=r.y,this.mainBar.insertChild(i,r.index),h(e.node).parallel(h(e.cardBody).to(.2,{scale:new l(1,1,1)}),h(e.node).to(.2,{worldPosition:o})).call((function(){e.node.removeFromParent();var n=t.mainBar.children.indexOf(i);i.removeFromParent(),t.mainBar.insertChild(e.node,n),t.taskQueue.addTask((function(){return new Promise((function(e){t.checkThreeRepeatedCards(),e()}))}))})).start()},r.checkThreeRepeatedCards=function(){var e=this.mainBar.children;if(!(e.length<3)){for(var t=!1,n=0;n<e.length-2;n++){var i=e[n].getComponent(p),a=e[n+1].getComponent(p),r=e[n+2].getComponent(p);if(null!=i&&null!=a&&null!=r){if(i.getCardType()==a.getCardType()&&a.getCardType()==r.getCardType()){if(this.animationNode){this.mainBar.getComponent(c);var o=this.mainBar.getWorldPosition();this.createAnimationNode(o.x+C.instance.cardWidth*n,o.y),this.createAnimationNode(o.x+C.instance.cardWidth*(n+1),o.y),this.createAnimationNode(o.x+C.instance.cardWidth*(n+2),o.y)}e[n].removeFromParent(),e[n].removeFromParent(),e[n].removeFromParent(),this.currentMainItems-=3,g.emit(g.Event_Sound_PlayClear);break}}else t=!0}this.checkOwnerData(),!t&&this.currentMainItems>=7?(g.emit(g.Event_Game_Fail),g.emit(g.Event_Sound_PlayFail),this.setPreMoveCardOwnerData(null)):0==this.currentMainItems&&0==this.mainBar.children.length&&0==this.extendBar.children.length&&g.emit(g.Event_Try_Check_Success)}},r.createAnimationNode=function(e,t){var n=u(this.animationNode);e+=C.instance.gridWidth,t+=C.instance.gridHeight;var i=this.node.getComponent(c).convertToNodeSpaceAR(new l(e,t,0));n.setPosition(i),this.node.addChild(n);var a=n.getComponent(m);this.scheduleOnce((function(){n.removeFromParent()}),a.getState("ReleaseCard").duration)},r.onMoveToExtendBar=function(){var e=this;if(0!=this.currentMainItems){g.emit(g.Event_Sound_PlayClick);for(var t=[],n=Math.min(this.mainBar.children.length,3),i=this.extendBar.getComponent(f),a=0;a<n;a++){var r=this.mainBar.children[a];t.push(r)}for(var o=function(n){var a=i.getNodeContainer(n),r=a.getWorldPosition();h(t[n]).to(.2,{worldPosition:r}).call((function(){t[n].removeFromParent(),t[n].setPosition(0,0),t[n].getComponent(p).clickable=!0,a.addChild(t[n]),e.currentMainItems--,e.checkOwnerData()})).start()},s=0;s<n;s++)o(s);g.emit(g.Event_Update_MoveOut_Chance,-1)}},r.onClickRevoke=function(){0!=this.currentMainItems&&null!=this._preMoveCardOwnerData&&(g.emit(g.Event_Sound_PlayClick),this._preMoveCardOwnerData.revoke(),this.setPreMoveCardOwnerData(null),this.currentMainItems--,g.emit(g.Event_Update_Revoke_Chance,-1))},r.checkOwnerData=function(){null!=this._preMoveCardOwnerData&&(null!=this._preMoveCardOwnerData.card&&this._preMoveCardOwnerData.card.node.parent==this.mainBar||this.setPreMoveCardOwnerData(null))},t}(v)).prototype,"extendBar",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=t(D.prototype,"mainBar",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=t(D.prototype,"dockBarBg",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=t(D.prototype,"animationNode",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=D))||x));r._RF.pop()}}}));

System.register("chunks:///_virtual/EventCenter.ts",["cc"],(function(e){var n,t;return{setters:[function(e){n=e.cclegacy,t=e.EventTarget}],execute:function(){n._RF.push({},"e4688zbY2pNdIXYNG7TIZEF","EventCenter",void 0);var _=new t,a=e("default",function(){function e(){}return e.on=function(e,n,t){_.on(e,n,t)},e.once=function(e,n,t){_.once(e,n,t)},e.off=function(e,n,t){_.off(e,n,t)},e.emit=function(e){for(var n=arguments.length,t=new Array(n>1?n-1:0),a=1;a<n;a++)t[a-1]=arguments[a];_.emit.apply(_,[e].concat(t))},e}());a.Event_Click_Card="Event_Click_Card",a.Event_Try_Check_Success="Event_Try_Check_Success",a.Event_Game_Success="Event_Game_Success",a.Event_Game_Fail="Event_Game_Fail",a.Event_Revoke_StatusChange="Event_Revoke_StatusChange",a.Event_Execute_MoveOut="Event_Execute_MoveOut",a.Event_Update_MoveOut_Chance="Event_Update_MoveOut_Chance",a.Event_Execute_Revoke="Event_Execute_Revoke",a.Event_Update_Revoke_Chance="Event_Update_Revoke_Chance",a.Event_Execute_Shuffle_Cards="Event_Execute_Shuffle_Cards",a.Event_Update_Shuffle_Chance="Event_Update_Shuffle_Chance",a.Event_Sound_PlayBgm="Event_Sound_PlayBgm",a.Event_Sound_PlayClick="Event_Sound_PlayClick",a.Event_Sound_PlayFail="Event_Sound_PlayFail",a.Event_Sound_PlaySuccess="Event_Sound_PlaySuccess",a.Event_Sound_PlayClear="Event_Sound_PlayClear",n._RF.pop()}}}));

System.register("chunks:///_virtual/ExtendBar.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CardManager.ts"],(function(e){var t,i,r,n,o,a,c,l,u,s;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,r=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){o=e.cclegacy,a=e._decorator,c=e.Node,l=e.UITransform,u=e.Component},function(e){s=e.CardsManager}],execute:function(){var d,f,p,h,g,N,m,y,b;o._RF.push({},"270ecVEcoRLIoforEiOoEpE","ExtendBar",void 0);var z=a.ccclass,v=a.property;e("ExtendBar",(d=z("ExtendBar"),f=v(c),p=v(c),h=v(c),d((m=t((N=function(e){function t(){for(var t,i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o))||this,r(t,"leftNode",m,n(t)),r(t,"midNode",y,n(t)),r(t,"rightNode",b,n(t)),t}i(t,e);var o=t.prototype;return o.start=function(){this.initSize(this.leftNode),this.initSize(this.midNode),this.initSize(this.rightNode)},o.initSize=function(e){if(e){var t=e.getComponent(l);t&&t.setContentSize(s.instance.cardWidth,s.instance.cardHeight)}},o.getNodeContainer=function(e){switch(e){case 0:return this.leftNode;case 1:return this.midNode;case 2:return this.rightNode;default:return null}},t}(u)).prototype,"leftNode",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=t(N.prototype,"midNode",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=t(N.prototype,"rightNode",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=N))||g));o._RF.pop()}}}));

System.register("chunks:///_virtual/GameEntry.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AudioManager.ts"],(function(t){var e,n,i,r,o,a,u,c,l,p,s;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){o=t.cclegacy,a=t._decorator,u=t.Node,c=t.AudioClip,l=t.director,p=t.Component},function(t){s=t.AudioManager}],execute:function(){var f,y,d,m,h,b,g;o._RF.push({},"7f2a8MB6HlBJIKaejLxJlQ2","GameEntry",void 0);var A=a.ccclass,G=a.property;t("GameEntry",(f=A("GameEntry"),y=G(u),d=G(c),f((b=e((h=function(t){function e(){for(var e,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o))||this,i(e,"entryUI",b,r(e)),i(e,"clickButtonAudio",g,r(e)),e}n(e,t);var o=e.prototype;return o.start=function(){},o.update=function(t){},o.onStartGame=function(){s.inst.playOneShot(this.clickButtonAudio),l.loadScene("GameClimb")},o.onStartJumpGame=function(){s.inst.playOneShot(this.clickButtonAudio),l.loadScene("GameJump")},e}(p)).prototype,"entryUI",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=e(h.prototype,"clickButtonAudio",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=h))||m));o._RF.pop()}}}));

System.register("chunks:///_virtual/GameManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Hero.ts","./StairUI.ts","./AudioManager.ts"],(function(t){var i,e,a,r,s,n,o,l,h,u,c,d,S,m,f,p,v,g,P;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,a=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){s=t.cclegacy,n=t._decorator,o=t.Node,l=t.Prefab,h=t.AudioClip,u=t.input,c=t.Input,d=t.Vec3,S=t.math,m=t.instantiate,f=t.director,p=t.Component},function(t){v=t.Hero},function(t){g=t.StairUI},function(t){P=t.AudioManager}],execute:function(){var G,b,I,T,y,U,w,A,x,H,z,R,_,D,C,N,O,M,k,B,F;s._RF.push({},"a66b4UJD9hGp5/hRfu35GUp","GameManager",void 0);var L=n.ccclass,J=n.property,W=function(){function t(t,i){this.leftStair=null,this.rightStair=null,this.next=null,this.leftStair=t,this.rightStair=i}return t.prototype.getNormalStair=function(){return this.leftStair&&this.rightStair?this.leftStair.hasStone()?this.rightStair:this.leftStair:this.leftStair?this.leftStair:this.rightStair?this.rightStair:null},t}();t("GameManager",(G=L("GameManager"),b=J(o),I=J(l),T=J(v),y=J(o),U=J(o),w=J(o),A=J(h),x=J(h),H=J(h),G((_=i((R=function(t){function i(){for(var i,e=arguments.length,s=new Array(e),n=0;n<e;n++)s[n]=arguments[n];return i=t.call.apply(t,[this].concat(s))||this,a(i,"stairsParent",_,r(i)),a(i,"stairPrefab",D,r(i)),a(i,"hero",C,r(i)),a(i,"failedUI",N,r(i)),a(i,"successUI",O,r(i)),a(i,"gameGuideUI",M,r(i)),a(i,"failedAudio",k,r(i)),a(i,"successAudio",B,r(i)),a(i,"clickButtonAudio",F,r(i)),i.totalStairs=150,i.moveSteps=0,i.removeSteps=0,i.stairPairHead=null,i.stairPairTail=null,i.heroStandStair=null,i.removeStairTimeInterval=1.5,i.removeStairDeltaTime=0,i.isGameStopped=!1,i}e(i,t);var s=i.prototype;return s.start=function(){u.on(c.EventType.TOUCH_START,this.onTouchStart,this),this.initStairs(),this.shouldShowGameGuideUI()?this.gameGuideUI&&(this.isGameStopped=!0,this.gameGuideUI.active=!0):this.gameGuideUI&&(this.gameGuideUI.active=!1)},s.tryRemoveStairs=function(){if(this.moveSteps>0&&!1===this.isGameStopped){var t,i=this.stairPairHead;if(!i)return;this.stairPairHead=null==(t=this.stairPairHead)?void 0:t.next,i.leftStair&&i.leftStair.startDropping(),i.rightStair&&i.rightStair.startDropping(),this.removeSteps+=1,this.removeSteps>this.moveSteps&&this.onGameFailed()}},s.initStairs=function(){if(this.isGameStopped=!1,this.stairsParent&&this.stairPrefab){this.stairPairTail=null,this.stairPairHead=null,this.stairsParent.removeAllChildren();for(var t=0;t<10;t++)this.spawnStair()}if(this.stairPairHead){var i,e,a,r=null==(i=this.stairPairHead.getNormalStair())?void 0:i.standPosition;if(r)null==(e=this.hero)||e.setActive(!0),null==(a=this.hero)||a.node.setWorldPosition(r.getWorldPosition()),this.heroStandStair=this.stairPairHead}},s.onTouchStart=function(t){var i;if(console.log("touch start: X:",t.getLocationX().toString(),"  Y:",t.getLocationY().toString()),this.isGameStopped&&this.gameGuideUI&&this.gameGuideUI.active)return this.gameGuideUI.active=!1,this.isGameStopped=!1,void this.setGameGuideShowed();if(!this.isGameStopped&&this.hero&&this.heroStandStair&&this.heroStandStair.next){var e=null==(i=this.heroStandStair)?void 0:i.next;if(t.getLocationX()<310){var a=null==e?void 0:e.leftStair;this.onJumpToNextStair(a,!0)}else{var r=null==e?void 0:e.rightStair;this.onJumpToNextStair(r,!1)}this.spawnStair()}},s.shouldShowGameGuideUI=function(){var t=localStorage.getItem("has_show_guide_ui");return!t||"1"!=t},s.setGameGuideShowed=function(){localStorage.setItem("has_show_guide_ui","1")},s.onJumpToNextStair=function(t,i){if(t){var e;this.hero.jumpToNextStair(t.standPosition.getWorldPosition()),this.heroStandStair=null==(e=this.heroStandStair)?void 0:e.next,t.hasStone()?this.onGameFailed():(this.moveSteps+=1,t.hasReward()&&this.onGameSuccess())}else{console.log("game failed because empty stair");var a=this.hero.node.getWorldPosition();this.hero.jumpToNextStair(new d(i?a.x-54:a.x+54,a.y,a.z)),this.onGameFailed()}},s.onGameFailed=function(){var t=this;console.log("game failed"),this.failedAudio&&P.inst.playOneShot(this.failedAudio),this.isGameStopped=!0,this.scheduleOnce((function(){t.failedUI&&(t.failedUI.active=!0)}),1.1)},s.onGameSuccess=function(){var t=this;this.isGameStopped=!0,this.successAudio&&P.inst.playOneShot(this.successAudio,.5),console.log("game success"),this.scheduleOnce((function(){t.successUI&&(t.successUI.active=!0)}),.8)},s.onDestroy=function(){u.off(c.EventType.TOUCH_START,this.onTouchStart,this)},s.update=function(t){if(this.removeStairDeltaTime+=t,this.removeStairDeltaTime>=this.removeStairTimeInterval){this.removeStairDeltaTime=0;var i=1;this.moveSteps-this.removeSteps>7&&(i=S.randomRangeInt(1,6));for(var e=0;e<i;e++)this.tryRemoveStairs();this.removeStairTimeInterval-=.05*this.moveSteps,this.removeStairTimeInterval<.3&&(this.removeStairTimeInterval=.3)}},s.spawnStair=function(){if(this.stairsParent&&this.stairPrefab&&!(this.totalStairs<=0)){var t=m(this.stairPrefab),i=t.getComponent(g);if(null!=this.stairPairHead&&null!=this.stairPairTail){var e=this.stairPairTail.getNormalStair().node;this.stairsParent.insertChild(t,0);var a=e.getPosition(),r=1==S.randomRangeInt(0,2)?1:-1,s=a.x+54*r,n=null;if(this.totalStairs>1){var o=S.random()>.5?m(this.stairPrefab):null;o&&(this.stairsParent.insertChild(o,0),n=o.getComponent(g),o.setPosition(a.x-54*r,a.y+60,a.z),n&&n.setStoneVisible(!0))}else i.setRewardVisible(!0);var l=null;l=1===r?new W(n,i):new W(i,n),this.stairPairTail.next=l,this.stairPairTail=this.stairPairTail.next,this.totalStairs-=1,t.setPosition(s,a.y+60,a.z)}else this.stairsParent.addChild(t),t.setPosition(350,450,0),this.stairPairHead=new W(i,null),this.stairPairTail=this.stairPairHead,this.totalStairs-=1}},s.onRestartGame=function(){P.inst.playOneShot(this.clickButtonAudio),f.loadScene(f.getScene().name),this.failedUI&&(this.failedUI.active=!1),this.successUI&&(this.successUI.active=!1)},s.onBackHomePage=function(){P.inst.playOneShot(this.clickButtonAudio),f.loadScene("GameEntry")},i}(p)).prototype,"stairsParent",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=i(R.prototype,"stairPrefab",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=i(R.prototype,"hero",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=i(R.prototype,"failedUI",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=i(R.prototype,"successUI",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=i(R.prototype,"gameGuideUI",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=i(R.prototype,"failedAudio",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=i(R.prototype,"successAudio",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=i(R.prototype,"clickButtonAudio",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=R))||z));s._RF.pop()}}}));

System.register("chunks:///_virtual/GameManager2.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Player.ts","./StairsParent.ts","./VecUtil.ts","./LiveScoreUI.ts","./GameResultUI.ts","./ScoreManager.ts"],(function(e){var t,i,r,a,n,s,o,c,l,u,h,p,m,g,d,f,S,y,P;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,r=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){n=e.cclegacy,s=e._decorator,o=e.Camera,c=e.input,l=e.Input,u=e.Vec3,h=e.tween,p=e.easing,m=e.Component},function(e){g=e.Player},function(e){d=e.StairsParent},function(e){f=e.calculateAxisDistance},function(e){S=e.LiveScoreUI},function(e){y=e.GameResultUI},function(e){P=e.ScoreManager}],execute:function(){var v,T,U,b,w,R,I,G,C,D,z,O,E;n._RF.push({},"bbeca8QUG1HB6Rx+zNPcmuK","GameManager",void 0);var N=s.ccclass,x=s.property;e("GameManager",(v=N("GameManager"),T=x(d),U=x(g),b=x(o),w=x(S),R=x(y),v((C=t((G=function(e){function t(){for(var t,i=arguments.length,n=new Array(i),s=0;s<i;s++)n[s]=arguments[s];return t=e.call.apply(e,[this].concat(n))||this,r(t,"stairsParent",C,a(t)),r(t,"player",D,a(t)),r(t,"camera",z,a(t)),r(t,"liveScoreUI",O,a(t)),r(t,"gameResultUI",E,a(t)),t.needRecoverCameraView=!1,t.isGameOver=!1,t.isJumping=!1,t}i(t,e);var n=t.prototype;return n.start=function(){this.initGame(),this.isGameOver=!1,P.inst.resetScore(),c.on(l.EventType.TOUCH_START,this.onTouchStart,this),c.on(l.EventType.TOUCH_END,this.onTouchEnd,this)},n.onDestroy=function(){c.off(l.EventType.TOUCH_START,this.onTouchStart,this),c.off(l.EventType.TOUCH_END,this.onTouchEnd,this)},n.onTouchStart=function(e){this.isGameOver||this.isJumping||(this.player&&this.player.startKneel(),this.stairsParent.getStandStair&&this.stairsParent.getStandStair().startKneel())},n.onTouchEnd=function(e){var t=this;if(!this.isGameOver&&!this.isJumping&&this.player&&this.stairsParent){this.player.endKneel(),this.stairsParent.getStandStair&&this.stairsParent.getStandStair().endKneel(),this.isJumping=!0;var i=this.player.computeJumpDistance(),r=this.stairsParent.getNextStair(),a=f(this.player.node.worldPosition,r.centerNode.worldPosition,i),n=new u;u.add(n,a,this.player.node.worldPosition),this.player.jumpToTarget(n,(function(){if(t.isJumping=!1,!(t.stairsParent.calculateScore(n)>0)){t.stairsParent.moveNextStair();var e=t.stairsParent.calculateScore(n);e>0?(t.player.setDirection(t.stairsParent.getNextStairDirection()),P.inst.addScore(e),t.liveScoreUI&&t.liveScoreUI.displayScore(P.inst.getTotalScore()),t.stairsParent.triggerScoreAnimation(e),console.log("game success: ",e),t.scheduleOnce((function(){t.needRecoverCameraView=!0}),.15)):(t.isGameOver=!0,t.player.onFailed(),t.gameResultUI&&(t.gameResultUI.setScore(P.inst.getTotalScore()),t.scheduleOnce((function(){t.gameResultUI.node.active=!0}),.5)),console.log("game failed"))}}))}},n.initGame=function(){if(this.stairsParent){var e=this.stairsParent.getStandStair();if(e&&this.player){this.player.node.setWorldPosition(e.centerNode.getWorldPosition());var t=this.stairsParent.getNextStairDirection();this.player.setDirection(t)}var i=this.stairsParent.getCenterPosition();this.camera&&this.camera.node.setWorldPosition(i.x,i.y,this.camera.node.getWorldPosition().z)}},n.update=function(e){if(this.needRecoverCameraView&&(this.needRecoverCameraView=!1,this.camera)){var t=this.stairsParent.getCenterPosition();t.z=this.camera.node.getWorldPosition().z,h(this.camera.node).to(.2,{worldPosition:t},{easing:p.linear}).start()}},t}(m)).prototype,"stairsParent",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=t(G.prototype,"player",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=t(G.prototype,"camera",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=t(G.prototype,"liveScoreUI",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=t(G.prototype,"gameResultUI",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=G))||I));n._RF.pop()}}}));

System.register("chunks:///_virtual/GameResultUI.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AudioManager.ts"],(function(t){var e,n,i,o,r,a,c,u,l,s,p,f,d,m;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){r=t.cclegacy,a=t._decorator,c=t.Label,u=t.AudioClip,l=t.UIOpacity,s=t.tween,p=t.easing,f=t.director,d=t.Component},function(t){m=t.AudioManager}],execute:function(){var y,g,h,b,v,A,L;r._RF.push({},"b6ad391SZNO0ZxLY7Ymmc8E","GameResultUI",void 0);var S=a.ccclass,I=a.property;t("GameResultUI",(y=S("GameResultUI"),g=I(c),h=I(u),y((A=e((v=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return e=t.call.apply(t,[this].concat(r))||this,i(e,"scoreLabel",A,o(e)),i(e,"clickButtonAudio",L,o(e)),e}n(e,t);var r=e.prototype;return r.onLoad=function(){var t=this.getComponent(l);t&&(t.opacity=0)},r.start=function(){var t=this.getComponent(l);s(t).to(1,{opacity:255},{easing:p.circIn}).start()},r.update=function(t){},r.onRestartGame=function(){m.inst.playOneShot(this.clickButtonAudio),f.loadScene(f.getScene().name)},r.onBackHomePage=function(){m.inst.playOneShot(this.clickButtonAudio),f.loadScene("GameEntry")},r.setScore=function(t){this.scoreLabel.string=""+t},e}(d)).prototype,"scoreLabel",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=e(v.prototype,"clickButtonAudio",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=v))||b));r._RF.pop()}}}));

System.register("chunks:///_virtual/Hero.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(i){var t,e,o,n,s,r,u,p,a,l;return{setters:[function(i){t=i.applyDecoratedDescriptor,e=i.inheritsLoose,o=i.initializerDefineProperty,n=i.assertThisInitialized},function(i){s=i.cclegacy,r=i._decorator,u=i.Animation,p=i.Node,a=i.AudioSource,l=i.Component}],execute:function(){var m,d,h,c,y,f,g;s._RF.push({},"e2673/TgT9OqJ3olbHM4p1h","Hero",void 0);var T=r.ccclass,j=r.property;i("Hero",(m=T("Hero"),d=j(u),h=j(p),m((f=t((y=function(i){function t(){for(var t,e=arguments.length,s=new Array(e),r=0;r<e;r++)s[r]=arguments[r];return t=i.call.apply(i,[this].concat(s))||this,o(t,"streakBodyAnim",f,n(t)),o(t,"streakBody",g,n(t)),t.jumpSpeedX=0,t.jumpSpeedY=0,t.jumpTime=0,t.deltaJumpTime=0,t.isJumping=!1,t.destPosition=null,t}e(t,i);var s=t.prototype;return s.update=function(i){if(this.isJumping)if(this.deltaJumpTime+=i,this.deltaJumpTime>=this.jumpTime)this.isJumping=!1,this.deltaJumpTime=0,this.destPosition&&this.node.setWorldPosition(this.destPosition);else{var t=this.node.getWorldPosition(),e=t.x+this.jumpSpeedX*i,o=t.y+this.jumpSpeedY*i;this.node.setWorldPosition(e,o,t.z)}},s.playJumpAnim=function(){this.streakBodyAnim&&this.streakBodyAnim.play()},s.setActive=function(i){this.streakBody&&(this.streakBody.active=i)},s.jumpToNextStair=function(i){var t=this.node.getWorldPosition(),e=i.x-t.x,o=i.y-t.y;0===this.jumpTime&&(this.jumpTime=this.streakBodyAnim.getState("HeroJump").duration),this.jumpTime>0&&(this.jumpSpeedX=e/this.jumpTime,this.jumpSpeedY=o/this.jumpTime),this.deltaJumpTime=0,this.destPosition=i,this.isJumping=!0,this.playVocalFrySound(),this.playJumpAnim()},s.playVocalFrySound=function(){var i=this.getComponent(a);console.log("play vocal sound"),i.play()},t}(l)).prototype,"streakBodyAnim",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=t(y.prototype,"streakBody",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),c=y))||c));s._RF.pop()}}}));

System.register("chunks:///_virtual/Level2.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Type.ts","./LinkedCards.ts"],(function(n){var a,r,o,e,t,l;return{setters:[function(n){a=n.createClass},function(n){r=n.cclegacy},function(n){o=n.LayerCardsSpecification,e=n.LayerCardsType,t=n.CardsSpecificationBlock},function(n){l=n.LinkedCardsDirection}],execute:function(){r._RF.push({},"342aeLN0cJP8aMXDs+au1g4","Level2",void 0),n("Level2",function(){function n(){this.layer1Data=[o.fromJSON({row:0,col:0,cardsType:e.LinkedCards,data:{cardsNumber:12,direction:l.LeftToRight}}),o.fromJSON({row:0,col:14,cardsType:e.LinkedCards,data:{cardsNumber:12,direction:l.RightToLeft}}),t.fromJSON({layers:[{row:3,col:4,cardsType:e.LinearFlattenCards,data:{numInRow:1,numInCol:3}},{row:2,col:4,cardsType:e.LinearFlattenCards,data:{numInRow:2,numInCol:3}}],repeatCount:6}),t.fromJSON({layers:[{row:11,col:4,cardsType:e.LinearFlattenCards,data:{numInRow:1,numInCol:3}},{row:10,col:4,cardsType:e.LinearFlattenCards,data:{numInRow:2,numInCol:3}}],repeatCount:6}),t.fromJSON({layers:[{row:14,col:0,cardsType:e.LinearFlattenCards,data:{numInRow:1,numInCol:3}},{row:16,col:0,cardsType:e.LinearFlattenCards,data:{numInRow:1,numInCol:1}},{row:16,col:4,cardsType:e.LinearFlattenCards,data:{numInRow:1,numInCol:1}},{row:15,col:1,cardsType:e.LinearFlattenCards,data:{numInRow:1,numInCol:2}}],repeatCount:3}),o.fromJSON({row:14,col:0,cardsType:e.LinearFlattenCards,data:{numInRow:1,numInCol:3}}),o.fromJSON({row:16,col:0,cardsType:e.LinearFlattenCards,data:{numInRow:1,numInCol:1}}),o.fromJSON({row:16,col:4,cardsType:e.LinearFlattenCards,data:{numInRow:1,numInCol:1}}),t.fromJSON({layers:[{row:14,col:8,cardsType:e.LinearFlattenCards,data:{numInRow:1,numInCol:3}},{row:16,col:8,cardsType:e.LinearFlattenCards,data:{numInRow:1,numInCol:1}},{row:16,col:12,cardsType:e.LinearFlattenCards,data:{numInRow:1,numInCol:1}},{row:15,col:9,cardsType:e.LinearFlattenCards,data:{numInRow:1,numInCol:2}}],repeatCount:3}),o.fromJSON({row:14,col:8,cardsType:e.LinearFlattenCards,data:{numInRow:1,numInCol:3}}),o.fromJSON({row:16,col:8,cardsType:e.LinearFlattenCards,data:{numInRow:1,numInCol:1}}),o.fromJSON({row:16,col:12,cardsType:e.LinearFlattenCards,data:{numInRow:1,numInCol:1}})],this.layer2Data=[o.fromJSON({row:3,col:2,cardsType:e.LinearFlattenCards,data:{numInRow:5,numInCol:5}}),o.fromJSON({row:3,col:1,cardsType:e.LinearFlattenCards,data:{numInRow:5,numInCol:6}}),o.fromJSON({row:6,col:0,cardsType:e.LinearFlattenCards,data:{numInRow:2,numInCol:1}}),o.fromJSON({row:6,col:12,cardsType:e.LinearFlattenCards,data:{numInRow:2,numInCol:1}}),o.fromJSON({row:10,col:2,cardsType:e.LinearFlattenCards,data:{numInRow:2,numInCol:1}}),o.fromJSON({row:10,col:10,cardsType:e.LinearFlattenCards,data:{numInRow:2,numInCol:1}}),o.fromJSON({row:4,col:2,cardsType:e.LinearFlattenCards,data:{numInRow:1,numInCol:1}}),o.fromJSON({row:4,col:10,cardsType:e.LinearFlattenCards,data:{numInRow:1,numInCol:1}})]}return a(n,null,[{key:"instance",get:function(){return null==n._inst&&(n._inst=new n),n._inst}}]),n}())._inst=null,r._RF.pop()}}}));

System.register("chunks:///_virtual/LinearFlattenCards.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CardsComponent.ts","./CardManager.ts"],(function(n){var t,i,r,a,o;return{setters:[function(n){t=n.inheritsLoose},function(n){i=n.cclegacy,r=n._decorator},function(n){a=n.CardsComponent},function(n){o=n.CardsManager}],execute:function(){var s;i._RF.push({},"05a5bSmMQRK7LvRYn/5/DX+","LinearFlattenCards",void 0);var e=r.ccclass;r.property,n("LinearFlattenCardsDirection",function(n){return n[n.VERTICAL_OFFSET_FIRST=0]="VERTICAL_OFFSET_FIRST",n[n.VERTICAL_OFFSET_SECOND=1]="VERTICAL_OFFSET_SECOND",n[n.HORIZONTAL_OFFSET_FIRST=2]="HORIZONTAL_OFFSET_FIRST",n[n.HORIZONTAL_OFFSET_SECOND=3]="HORIZONTAL_OFFSET_SECOND",n}({})),n("LinearFlattenCardsConfig",(function(n,t){this.numInCol=void 0,this.numInRow=void 0,this.numInCol=n,this.numInRow=t})),n("LinearFlattenCards",e("LinearFlattenCards")(s=function(n){function i(){for(var t,i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return(t=n.call.apply(n,[this].concat(r))||this)._config=void 0,t}t(i,n);var r=i.prototype;return r.initConfig=function(n){this._config=n},r.onLoad=function(){this._config?this.addCards():console.log("LinearFlattenCards config is null")},r.countConfigCardsNumber=function(){return this._config?this._config.numInCol*this._config.numInRow:0},r.addCards=function(){for(var n=this._config.numInCol,t=this._config.numInRow,i=0;i<n;i++)for(var r=i*o.instance.cardWidth,a=0;a<t;a++){var s=this.spawnCard(i*t+a);this.node.addChild(s),s.setPosition(r,a*o.instance.cardHeight)}},r.spawnCard=function(n){var t=0;this._cards&&this._cards.length>n&&(t=this._cards[n]);var i=o.instance.createCard(t);return i.setCardsComponent(this),null==i?null:i.node},i}(a))||s);i._RF.pop()}}}));

System.register("chunks:///_virtual/LinkedCards.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CardManager.ts","./CardsComponent.ts"],(function(t){var i,o,n,e,s;return{setters:[function(t){i=t.inheritsLoose},function(t){o=t.cclegacy,n=t._decorator},function(t){e=t.CardsManager},function(t){s=t.CardsComponent}],execute:function(){var r;o._RF.push({},"99f13lu/gFAJpfOMp8I63kb","LinkedCards",void 0);var a=n.ccclass,d=(n.property,function(t){this.cardNode=void 0,this.prev=void 0,this.next=void 0,this.cardNode=t}),c=t("LinkedCardsDirection",function(t){return t[t.LeftToRight=0]="LeftToRight",t[t.RightToLeft=1]="RightToLeft",t[t.TopToBottom=2]="TopToBottom",t[t.BottomToTop=3]="BottomToTop",t}({}));t("LinkCardsConfig",(function(t,i,o){void 0===o&&(o=10),this.cardsNumber=void 0,this.direction=c.LeftToRight,this.space=10,this.cardsNumber=t,this.direction=i,this.space=o})),t("LinkedCards",a("LinkedCards")(r=function(t){function o(){for(var i,o=arguments.length,n=new Array(o),e=0;e<o;e++)n[e]=arguments[e];return(i=t.call.apply(t,[this].concat(n))||this).config=void 0,i.head=void 0,i.tail=void 0,i}i(o,t);var n=o.prototype;return n.initConfig=function(t){null!=t&&(this.config=t)},n.onLoad=function(){this.config?this.initLink():console.log("LinkedCards config is null")},n.countConfigCardsNumber=function(){return this.config?this.config.cardsNumber:0},n.initLink=function(){this.node.removeAllChildren(),this.head=null,this.tail=null;for(var t=0;t<this.config.cardsNumber;t++){var i=this.spawnCard(t);if(null==this.head)this.head=new d(i),this.tail=this.head;else{var o=new d(i);this.tail.next=o,o.prev=this.tail,this.tail=o}this.node.addChild(i)}var n=0,s=0,r=this.config.space;switch(this.config.direction){case c.LeftToRight:for(var a=this.head;null!=a;)a.cardNode.setPosition(n,s,0),n+=r,a=a.next;break;case c.RightToLeft:var h=this.head;for(n=-e.instance.cardWidth;null!=h;)h.cardNode.setPosition(n,s,0),n-=r,h=h.next;break;case c.TopToBottom:var l=this.head;for(s=-e.instance.cardWidth;null!=l;)l.cardNode.setPosition(n,s,0),s-=r,l=l.next;break;case c.BottomToTop:for(var u=this.head;null!=u;)u.cardNode.setPosition(n,s,0),s+=r,u=u.next}},n.spawnCard=function(t){var i=0;this._cards&&this._cards.length>t&&(i=this._cards[t]);var o=e.instance.createCard(i);return o.setCardsComponent(this),null==o?null:o.node},o}(s))||r);o._RF.pop()}}}));

System.register("chunks:///_virtual/LiveScoreUI.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var r,o,t,i,c,n,s,a;return{setters:[function(e){r=e.applyDecoratedDescriptor,o=e.inheritsLoose,t=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){c=e.cclegacy,n=e._decorator,s=e.Label,a=e.Component}],execute:function(){var l,p,u,f,d;c._RF.push({},"3c5c9RwmgpHNop99cBHi4om","LiveScoreUI",void 0);var v=n.ccclass,y=n.property;e("LiveScoreUI",(l=v("LiveScoreUI"),p=y(s),l((d=r((f=function(e){function r(){for(var r,o=arguments.length,c=new Array(o),n=0;n<o;n++)c[n]=arguments[n];return r=e.call.apply(e,[this].concat(c))||this,t(r,"scoreNode",d,i(r)),r}return o(r,e),r.prototype.displayScore=function(e){this.scoreNode&&(this.scoreNode.string=""+e)},r}(a)).prototype,"scoreNode",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),u=f))||u));c._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./DarkMask.ts","./GameManager.ts","./Hero.ts","./StairUI.ts","./AudioManager.ts","./BottomBarContainer.ts","./CardManager.ts","./Card.ts","./CardOwnerData.ts","./CardsLayer.ts","./LinearFlattenCards.ts","./LinkedCards.ts","./SimpleIntersectCards.ts","./CardsBoard.ts","./CardPlaceHolder.ts","./DockBar.ts","./ExtendBar.ts","./EventCenter.ts","./Level2.ts","./PopupPanel.ts","./SoundsCenter.ts","./TaskQueue.ts","./CardsComponent.ts","./CardsLayerComponent.ts","./Type.ts","./GameEntry.ts","./GameManager2.ts","./GameResultUI.ts","./LiveScoreUI.ts","./Player.ts","./ScoreManager.ts","./StairBlock.ts","./StairsParent.ts","./VecUtil.ts"],(function(){return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/Player.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AudioManager.ts"],(function(e){var t,i,n,o,r,s,a,u,l,c,p,d,h,m,y;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){r=e.cclegacy,s=e._decorator,a=e.Node,u=e.AudioClip,l=e.Vec3,c=e.AudioSource,p=e.tween,d=e.easing,h=e.Animation,m=e.Component},function(e){y=e.AudioManager}],execute:function(){var f,g,A,b,j,S,T,k,w,B,P,D,v;r._RF.push({},"5e39d9z9SJA06bxT4j/ILIM","Player",void 0);var K=s.ccclass,R=s.property;e("Player",(f=K("Player"),g=R(a),A=R(a),b=R(u),j=R(u),S=R(u),f((w=t((k=function(e){function t(){for(var t,i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return t=e.call.apply(e,[this].concat(r))||this,n(t,"streakBody",w,o(t)),n(t,"streakRotateBody",B,o(t)),n(t,"pressAudio",P,o(t)),n(t,"jumpAudio",D,o(t)),n(t,"failedAudio",v,o(t)),t.isKneeling=!1,t.extremeKneelTime=.8,t.extremeKneelScale=.6,t.pressTime=0,t.pressTimeToDistanceRatio=700,t.jumpDuration=.5,t.targetPos=new l,t.direction=1,t.jumpAudioSource=null,t}i(t,e);var r=t.prototype;return r.start=function(){y.inst.stop(),this.jumpAudioSource=this.node.getComponent(c)},r.startKneel=function(){this.jumpAudioSource&&this.jumpAudioSource.play(),this.pressTime=0,this.isKneeling=!0},r.endKneel=function(){this.jumpAudioSource&&this.jumpAudioSource.stop(),this.isKneeling=!1,this.streakBody&&this.streakBody.setScale(1,1,1)},r.computeJumpDistance=function(){return this.pressTime*this.pressTimeToDistanceRatio},r.jumpToTarget=function(e,t){var i=this;this.jumpAudio&&y.inst.play(this.jumpAudio,.4);var n=this.node.worldPosition,o=l.distance(n,e),r=this.calculateHeight(30,o),s=(e.y+this.node.worldPosition.y)/2+r;p(this.node).parallel(p(this.streakRotateBody).to(this.jumpDuration,{eulerAngles:new l(0,0,-360)},{easing:d.linear}),p(this.node).to(this.jumpDuration/2,{worldPositionY:s},{easing:d.cubicOut}).sequence(p(this.node).to(this.jumpDuration/2,{worldPositionY:e.y},{easing:d.cubicIn})),p(this.node).to(this.jumpDuration,{worldPositionX:e.x},{easing:d.linear})).call((function(){i.streakRotateBody.setRotationFromEuler(0,0,0),t()})).start()},r.calculateHeight=function(e,t){var i=e*Math.PI/180;return Math.tan(i)*t},r.kneelByStep=function(e){if(this.isKneeling&&this.streakBody){this.pressTime+=e;var t=Math.min(this.pressTime,this.extremeKneelTime)/this.extremeKneelTime*this.extremeKneelScale,i=1+.7*t,n=1-t;this.streakBody.setScale(i,n,1)}},r.update=function(e){this.kneelByStep(e)},r.setDirection=function(e){this.direction=e,this.node.setScale(this.direction,1)},r.onFailed=function(){if(this.streakRotateBody){var e=this.streakRotateBody.getComponent(h);e&&(e.play("PlayerDown"),this.failedAudio&&y.inst.playOneShot(this.failedAudio,1))}},t}(m)).prototype,"streakBody",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=t(k.prototype,"streakRotateBody",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=t(k.prototype,"pressAudio",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=t(k.prototype,"jumpAudio",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=t(k.prototype,"failedAudio",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=k))||T));r._RF.pop()}}}));

System.register("chunks:///_virtual/PopupPanel.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,n,i,r,l,o,a,c;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){l=e.cclegacy,o=e._decorator,a=e.Label,c=e.Component}],execute:function(){var u,p,s,b,f,L,h;l._RF.push({},"464e8HB1A1Lz5Dx52kTCGi9","PopupPanel",void 0);var y=o.ccclass,P=o.property;e("PopupPanel",(u=y("PopupPanel"),p=P(a),s=P(a),u((L=t((f=function(e){function t(){for(var t,n=arguments.length,l=new Array(n),o=0;o<n;o++)l[o]=arguments[o];return t=e.call.apply(e,[this].concat(l))||this,i(t,"titleLabel",L,r(t)),i(t,"contentLabel",h,r(t)),t}return n(t,e),t.prototype.start=function(){this.titleLabel&&(this.titleLabel.string="这是一个弹窗"),this.contentLabel&&(this.contentLabel.string="这里可以放置弹窗的具体内容。")},t}(c)).prototype,"titleLabel",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=t(f.prototype,"contentLabel",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=f))||b));l._RF.pop()}}}));

System.register("chunks:///_virtual/ScoreManager.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,r;return{setters:[function(e){t=e.createClass},function(e){r=e.cclegacy}],execute:function(){r._RF.push({},"7c59e6HWC9EO60oGkXsopz2","ScoreManager",void 0);var n=function(e){return e[e.HIGHEST=0]="HIGHEST",e[e.NORMAL=1]="NORMAL",e[e.LOWEST=2]="LOWEST",e}(n||{});e("ScoreManager",function(){function e(){this.highestScoreTimes=0,this.totalScore=0}var r=e.prototype;return r.getScoreType=function(e){return e<15?n.HIGHEST:e<40?n.NORMAL:n.LOWEST},r.getScore=function(e){switch(this.getScoreType(e)){case n.HIGHEST:return this.highestScoreTimes++,4*this.highestScoreTimes;case n.NORMAL:return this.highestScoreTimes=0,2;case n.LOWEST:return this.highestScoreTimes=0,1}},r.getTotalScore=function(){return this.totalScore},r.addScore=function(e){this.totalScore+=e},r.resetScore=function(){this.totalScore=0,this.highestScoreTimes=0},t(e,null,[{key:"inst",get:function(){return e._instance||(e._instance=new e),e._instance}}]),e}())._instance=void 0,r._RF.pop()}}}));

System.register("chunks:///_virtual/SimpleIntersectCards.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CardManager.ts","./CardsComponent.ts"],(function(t){var e,r,i,n,s,a;return{setters:[function(t){e=t.inheritsLoose,r=t.createClass},function(t){i=t.cclegacy,n=t._decorator},function(t){s=t.CardsManager},function(t){a=t.CardsComponent}],execute:function(){var c;i._RF.push({},"658ebAHlHdAS4uV+f+3O8Tg","SimpleIntersectCards",void 0);var o=n.ccclass,d=(n.property,t("SimpleIntersectCardsDirection",function(t){return t[t.HorizontalOffsetFirst=0]="HorizontalOffsetFirst",t[t.HorizontalOffsetSecond=1]="HorizontalOffsetSecond",t[t.VerticalOffsetFirst=2]="VerticalOffsetFirst",t[t.VerticalOffsetSecond=3]="VerticalOffsetSecond",t}({})));t("SimpleIntersectCardsConfig",(function(t,e,r){this.layerNumber=void 0,this.cardsNumber=void 0,this.direction=void 0,this.layerNumber=t,this.cardsNumber=e,this.direction=r})),t("SimpleIntersectCards",o("SimpleIntersectCards")(c=function(t){function i(){for(var e,r=arguments.length,i=new Array(r),n=0;n<r;n++)i[n]=arguments[n];return(e=t.call.apply(t,[this].concat(i))||this)._cardsConfig=null,e.typeIndex=0,e}e(i,t);var n=i.prototype;return n.initConfig=function(t){this._cardsConfig=t},n.countConfigCardsNumber=function(){if(!this._cardsConfig)return 0;for(var t=0,e=0;e<this._cardsConfig.layerNumber;e++)t+=this._cardsConfig.cardsNumber-e%2;return t},n.onLoad=function(){if(this._cardsConfig){this.typeIndex=0;for(var t=0;t<this.layerNumber;t++){var e=t%2;this.addCards(this.cardsNumber-e,e)}this.checkOccupiedGrids(),this.checkIsCardDarkMode()}},n.addCards=function(t,e){switch(this.direction){case d.HorizontalOffsetFirst:case d.HorizontalOffsetSecond:this.addHorizontalCards(t,e);break;case d.VerticalOffsetFirst:case d.VerticalOffsetSecond:this.addVerticalCards(t,e)}},n.addHorizontalCards=function(t,e){var r=s.instance.cardWidth,i=r/2*e,n=0;n=this.direction==d.HorizontalOffsetSecond?s.instance.cardHeight/2*e:s.instance.cardHeight/2*((e+1)%2);for(var a=0;a<t;a++){var c=s.instance.createCard(this._cards[this.typeIndex]);c.setCardsComponent(this);var o=c.node;this.typeIndex++,o.setPosition(i+a*r,n,0),this.node.addChild(o)}},n.addVerticalCards=function(t,e){var r=s.instance.cardHeight,i=r/2*e,n=0;n=this.direction==d.VerticalOffsetSecond?s.instance.cardWidth/2*e:s.instance.cardWidth/2*((e+1)%2);for(var a=0;a<t;a++){var c=s.instance.createCard(this._cards[this.typeIndex]);c.setCardsComponent(this);var o=c.node;this.typeIndex++,o.setPosition(n,i+a*r,0),this.node.addChild(o)}},r(i,[{key:"layerNumber",get:function(){return this._cardsConfig.layerNumber}},{key:"cardsNumber",get:function(){return this._cardsConfig.cardsNumber}},{key:"direction",get:function(){return this._cardsConfig.direction}}]),i}(a))||c);i._RF.pop()}}}));

System.register("chunks:///_virtual/SoundsCenter.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventCenter.ts"],(function(n){var o,e,i,t,u,l,r,a,s,c;return{setters:[function(n){o=n.applyDecoratedDescriptor,e=n.inheritsLoose,i=n.initializerDefineProperty,t=n.assertThisInitialized},function(n){u=n.cclegacy,l=n._decorator,r=n.AudioClip,a=n.AudioSource,s=n.Component},function(n){c=n.default}],execute:function(){var S,d,h,y,f,p,P,b,g,_,m,v,C,E,k;u._RF.push({},"8fcefmhN7JMIYIXh58VoZDA","SoundsCenter",void 0);var z=l.ccclass,w=l.property;n("SoundsCenter",(S=z("SoundsCenter"),d=w(r),h=w(r),y=w(r),f=w(a),p=w(r),P=w(a),S((_=o((g=function(n){function o(){for(var o,e=arguments.length,u=new Array(e),l=0;l<e;l++)u[l]=arguments[l];return o=n.call.apply(n,[this].concat(u))||this,i(o,"clickSound",_,t(o)),i(o,"failSound",m,t(o)),i(o,"successSound",v,t(o)),i(o,"audioSource",C,t(o)),i(o,"clearSound",E,t(o)),i(o,"bgmPlayer",k,t(o)),o}e(o,n);var u=o.prototype;return u.registerSoundEvent=function(){c.on(c.Event_Sound_PlayClick,this.onPlayClickSound,this),c.on(c.Event_Sound_PlayFail,this.onPlayFailSound,this),c.on(c.Event_Sound_PlaySuccess,this.onPlaySuccessSound,this),c.on(c.Event_Sound_PlayClear,this.onPlayClearSound,this),c.on(c.Event_Sound_PlayBgm,this.onPlayBgmSound,this)},u.unregisterSoundEvent=function(){c.off(c.Event_Sound_PlayClick,this.onPlayClickSound,this),c.off(c.Event_Sound_PlayFail,this.onPlayFailSound,this),c.off(c.Event_Sound_PlaySuccess,this.onPlaySuccessSound,this),c.off(c.Event_Sound_PlayClear,this.onPlayClearSound,this),c.off(c.Event_Sound_PlayBgm,this.onPlayBgmSound,this)},u.onPlayClickSound=function(){this.audioSource&&this.clickSound&&this.audioSource.playOneShot(this.clickSound)},u.onPlayFailSound=function(){this.audioSource&&this.failSound&&(this.bgmPlayer&&this.bgmPlayer.stop(),this.audioSource.playOneShot(this.failSound))},u.onPlaySuccessSound=function(){this.audioSource&&this.successSound&&(this.bgmPlayer&&this.bgmPlayer.stop(),this.audioSource.playOneShot(this.successSound))},u.onPlayClearSound=function(){this.audioSource&&this.clearSound&&this.audioSource.playOneShot(this.clearSound)},u.onPlayBgmSound=function(){this.bgmPlayer&&this.bgmPlayer.clip&&this.bgmPlayer.play()},u.onLoad=function(){this.registerSoundEvent()},u.onDestroy=function(){this.unregisterSoundEvent()},o}(s)).prototype,"clickSound",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=o(g.prototype,"failSound",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=o(g.prototype,"successSound",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=o(g.prototype,"audioSource",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=o(g.prototype,"clearSound",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=o(g.prototype,"bgmPlayer",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=g))||b));u._RF.pop()}}}));

System.register("chunks:///_virtual/StairBlock.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,i,n,o,r,s,l,a,c,u,p,h,d,f;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){r=e.cclegacy,s=e._decorator,l=e.Node,a=e.Label,c=e.PolygonCollider2D,u=e.UITransform,p=e.Intersection2D,h=e.Vec3,d=e.Animation,f=e.Component}],execute:function(){var g,m,y,b,P,v,B,S,N,k,K;r._RF.push({},"8224fY9+t1MPa41yl/z9k9x","StairBlock",void 0);var T=s.ccclass,x=s.property;e("StairBlock",(g=T("StairBlock"),m=x(l),y=x(l),b=x(a),P=x(l),g((S=t((B=function(e){function t(){for(var t,i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return t=e.call.apply(e,[this].concat(r))||this,n(t,"stairBody",S,o(t)),n(t,"centerNode",N,o(t)),n(t,"scorePopLabel",k,o(t)),n(t,"scorePopNode",K,o(t)),t.isKneeling=!1,t.extremeKneelTime=1,t.extremeKneelScale=.2,t.pressTime=0,t}i(t,e);var r=t.prototype;return r.start=function(){},r.update=function(e){this.kneelByStep(e)},r.startKneel=function(){console.log("start kneel"),this.pressTime=0,this.isKneeling=!0},r.endKneel=function(){console.log("end kneel"),this.isKneeling=!1,this.stairBody.setScale(1,1,1)},r.kneelByStep=function(e){if(this.isKneeling&&this.stairBody){this.pressTime+=e;var t=Math.min(this.pressTime,this.extremeKneelTime)/this.extremeKneelTime*this.extremeKneelScale,i=1+.6*t,n=1-t;this.stairBody.setScale(i,n,1)}},r.isInBlock=function(e){if(!this.stairBody)return!1;var t=this.stairBody.getComponent(c);if(!t)return!1;var i=this.stairBody.getComponent(u).convertToNodeSpaceAR(e);return p.pointInPolygon(i.toVec2(),t.points)},r.getDistanceToCenter=function(e){if(!this.centerNode)return 0;var t=this.centerNode.getWorldPosition();return h.distance(t,e)},r.triggerScoreAnimation=function(e){var t=this;if(this.scorePopLabel&&this.scorePopNode){this.scorePopLabel.string="+"+e.toString(),this.scorePopNode.active=!0;var i=this.scorePopNode.getComponent(d).getState("ScorePop").duration;this.scheduleOnce((function(){t.scorePopNode.active=!1}),i)}},t}(f)).prototype,"stairBody",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=t(B.prototype,"centerNode",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=t(B.prototype,"scorePopLabel",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=t(B.prototype,"scorePopNode",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=B))||v));r._RF.pop()}}}));

System.register("chunks:///_virtual/StairsParent.ts",["./rollupPluginModLoBabelHelpers.js","cc","./StairBlock.ts","./VecUtil.ts","./ScoreManager.ts","./AudioManager.ts"],(function(t){var i,n,e,r,a,s,o,l,u,c,h,d,S,f,g,v;return{setters:[function(t){i=t.applyDecoratedDescriptor,n=t.inheritsLoose,e=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){a=t.cclegacy,s=t._decorator,o=t.Prefab,l=t.AudioClip,u=t.Vec3,c=t.math,h=t.instantiate,d=t.Component},function(t){S=t.StairBlock},function(t){f=t.calculateDestPosition},function(t){g=t.ScoreManager},function(t){v=t.AudioManager}],execute:function(){var p,m,b,P,B,x,y;a._RF.push({},"bc575QEbfZJrKTHRYLlihSv","StairsParent",void 0);var k=s.ccclass,A=s.property,w=function(t,i){void 0===i&&(i=1),this.next=null,this.stairBlock=null,this.direction=1,this.stairBlock=t,this.direction=i};t("StairsParent",(p=k("StairsParent"),m=A([o]),b=A(l),p((x=i((B=function(t){function i(){for(var i,n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return i=t.call.apply(t,[this].concat(a))||this,e(i,"stairPrefabs",x,r(i)),e(i,"bestScoreAudio",y,r(i)),i.head=null,i.tail=null,i.standStair=null,i.vectorABRight=new u(15,7),i.vectorABLeft=new u(-15,7),i.minDistance=200,i.maxDistance=380,i.unusedStairsNumber=0,i.scoreManager=null,i}n(i,t);var a=i.prototype;return a.onLoad=function(){this.scoreManager=g.inst},a.start=function(){this.initStairs()},a.initStairs=function(){0!==this.stairPrefabs.length&&(this.node.removeAllChildren(),this.head=null,this.tail=null,this.standStair=null,this.spawnStair(),this.spawnStair(),this.standStair=this.head)},a.spawnStair=function(){if(0!==this.stairPrefabs.length){var t=c.randomRangeInt(0,this.stairPrefabs.length),i=null==this.head?this.stairPrefabs[0]:this.stairPrefabs[t],n=h(i);if(this.node.addChild(n),null==this.head)n.setPosition(0,0,0),this.head=new w(n.getComponent(S)),this.tail=this.head;else{var e,r=null==(e=this.tail)||null==(e=e.stairBlock)?void 0:e.node;if(r){var a=r.getWorldPosition(),s=Math.random()>.5?1:-1,o=s<0?this.vectorABLeft:this.vectorABRight,l=Math.random()*(this.maxDistance-this.minDistance)+this.minDistance,u=f(o,a,l);n.setWorldPosition(u),this.node.insertChild(n,0),this.tail.next=new w(n.getComponent(S),s),this.tail=this.tail.next}}}},a.update=function(t){},a.moveNextStair=function(){var t;null!=(null==(t=this.standStair)?void 0:t.next)&&(this.standStair=this.standStair.next),this.spawnStair(),this.unusedStairsNumber+=1,this.tryRemoveStairs()},a.tryRemoveStairs=function(){var t;null!=this.head&&(this.unusedStairsNumber<2||(null==(t=this.head.stairBlock)||t.node.destroy(),this.head=this.head.next,this.unusedStairsNumber-=1))},a.getStandStair=function(){var t;return null==(t=this.standStair)?void 0:t.stairBlock},a.getNextStair=function(){var t;return null==(t=this.standStair)||null==(t=t.next)?void 0:t.stairBlock},a.getNextStairDirection=function(){var t;return null==(t=this.standStair)||null==(t=t.next)?void 0:t.direction},a.getCenterPosition=function(){var t=this.getStandStair().centerNode.getWorldPosition(),i=this.getNextStair().centerNode.getWorldPosition(),n=new u;return u.add(n,t,i),u.multiplyScalar(n,n,.5),n},a.calculateScore=function(t){if(!this.standStair)return 0;if(!this.standStair.stairBlock)return 0;if(!this.standStair.stairBlock.isInBlock(t))return 0;var i=this.standStair.stairBlock.getDistanceToCenter(t);return this.scoreManager.getScore(i)},a.triggerScoreAnimation=function(t){this.standStair&&this.standStair.stairBlock.triggerScoreAnimation(t),t>4&&v.inst.playOneShot(this.bestScoreAudio)},i}(d)).prototype,"stairPrefabs",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),y=i(B.prototype,"bestScoreAudio",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=B))||P));a._RF.pop()}}}));

System.register("chunks:///_virtual/StairUI.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,n,i,r,o,a,s,l;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){o=t.cclegacy,a=t._decorator,s=t.Node,l=t.Component}],execute:function(){var u,c,p,f,d,h,m,b,g,y,E;o._RF.push({},"c082bK84ZBILorMbON81Y3o","StairUI",void 0);var w=a.ccclass,v=a.property;t("StairUI",(u=w("StairUI"),c=v(s),p=v(s),f=v(s),d=v(s),u((b=e((m=function(t){function e(){for(var e,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o))||this,i(e,"stoneElement",b,r(e)),i(e,"rewardElement",g,r(e)),i(e,"stairElement",y,r(e)),i(e,"standPosition",E,r(e)),e.isDropping=!1,e}n(e,t);var o=e.prototype;return o.start=function(){},o.update=function(t){if(this.isDropping){var e=this.node.getWorldPosition(),n=e.y-100*t;this.node.setWorldPosition(e.x,n,e.z),n<-100&&(this.isDropping=!1,this.node.destroy())}},o.startDropping=function(){this.isDropping=!0},o.setStoneVisible=function(t){this.stoneElement&&(this.stoneElement.active=t)},o.hasStone=function(){return this.stoneElement&&this.stoneElement.active},o.setRewardVisible=function(t){this.rewardElement&&(this.rewardElement.active=t)},o.hasReward=function(){return this.rewardElement&&this.rewardElement.active},e}(l)).prototype,"stoneElement",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=e(m.prototype,"rewardElement",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=e(m.prototype,"stairElement",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=e(m.prototype,"standPosition",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=m))||h));o._RF.pop()}}}));

System.register("chunks:///_virtual/TaskQueue.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var s,t,r;return{setters:[function(e){s=e.asyncToGenerator,t=e.regeneratorRuntime},function(e){r=e.cclegacy}],execute:function(){r._RF.push({},"0e018DiTkJMx6ECZuwsslm2","TaskQueue",void 0);e("TaskQueue",function(){function e(){this.queue=[],this.isProcessing=!1}var r=e.prototype;return r.addTask=function(e){this.queue.push(e),this.processQueue()},r.processQueue=function(){var e=s(t().mark((function e(){var s;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isProcessing&&0!==this.queue.length){e.next=2;break}return e.abrupt("return");case 2:if(this.isProcessing=!0,e.prev=3,!(s=this.queue.shift())){e.next=8;break}return e.next=8,s();case 8:return e.prev=8,this.isProcessing=!1,this.processQueue(),e.finish(8);case 12:case"end":return e.stop()}}),e,this,[[3,,8,12]])})));return function(){return e.apply(this,arguments)}}(),e}());r._RF.pop()}}}));

System.register("chunks:///_virtual/Type.ts",["cc"],(function(t){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"f23d8q5K21BCKaF63hJ90gq","Type",void 0);t("LayerCardsType",function(t){return t[t.LinkedCards=0]="LinkedCards",t[t.SimpleIntersectCards=1]="SimpleIntersectCards",t[t.LinearFlattenCards=2]="LinearFlattenCards",t}({}));var r=t("LayerCardsSpecification",function(){function t(t,e,r,n){this.row=void 0,this.col=void 0,this.cardsType=void 0,this.data=void 0,this.row=t,this.col=e,this.cardsType=r,this.data=n}return t.fromJSON=function(e){var r=new Map;return e.data&&Object.keys(e.data).forEach((function(t){r.set(t,e.data[t])})),new t(e.row,e.col,e.cardsType,r)},t}());t("CardsSpecificationBlock",function(){function t(t,e){this.layers=void 0,this.repeatCount=void 0,this.layers=t,this.repeatCount=e}return t.fromJSON=function(e){if(!e.layers)return new t([],0);var n=e.layers.map((function(t){return r.fromJSON(t)})),a=1;return e.repeatCount&&(a=e.repeatCount),new t(n,a)},t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/VecUtil.ts",["cc"],(function(e){var t,c,n;return{setters:[function(e){t=e.cclegacy,c=e.Vec3,n=e.Vec2}],execute:function(){e({calculateAxisDistance:function(e,t,n){var a=new c;c.subtract(a,t,e);var r=new c;c.normalize(r,a);var u=new c;return c.multiplyScalar(u,r,n),u},calculateDestPosition:function(e,t,n){var a=new c;c.normalize(a,e);var r=new c;return c.multiplyScalar(r,a,n),c.add(r,r,t),r},calculateDistance:function(e,t){var a=new c;return c.subtract(a,t,e),n.len(a)}}),t._RF.push({},"6efdbsQyepHjLx5DjNtGp95","VecUtil",void 0),t._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});